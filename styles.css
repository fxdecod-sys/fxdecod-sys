// المحرك الرئيسي للتطبيق
class FXDecodEngine {
    constructor() {
        this.initEventListeners();
        this.startLiveUpdates();
    }

    initEventListeners() {
        // أزرار الإطارات الزمنية
        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                this.updateChartTimeframe(e.target.textContent.trim());
            });
        });

        // عناصر القائمة
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', () => {
                this.handleMenuItemClick(item.textContent);
            });
        });
    }

    updateChartTimeframe(timeframe) {
        console.log('Updating timeframe to:', timeframe);
        // هنا سيتم تحديث الشارت بناءً على الإطار الزمني المختار
    }

    handleMenuItemClick(itemText) {
        console.log('Menu item clicked:', itemText);
        // معالجة النقر على عناصر القائمة
    }

    startLiveUpdates() {
        // تحديث الأسعار كل 5 ثوانٍ
        setInterval(() => {
            this.updateLivePrices();
        }, 5000);
    }

    updateLivePrices() {
        // محاكاة تحديث الأسعار الحية
        const priceElements = document.querySelectorAll('.price-up, .price-down');
        priceElements.forEach(element => {
            const currentPrice = parseFloat(element.textContent.split(' ')[0].replace(',', ''));
            const randomChange = (Math.random() - 0.5) * 0.1;
            const newPrice = currentPrice * (1 + randomChange / 100);
            
            if (randomChange > 0) {
                element.className = 'price-up';
                element.textContent = newPrice.toFixed(3) + ' +' + Math.abs(randomChange).toFixed(2) + '%';
            } else {
                element.className = 'price-down';
                element.textContent = newPrice.toFixed(3) + ' ' + randomChange.toFixed(2) + '%';
            }
        });
    }
}

// تهيئة التطبيق عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
    new FXDecodEngine();
});
